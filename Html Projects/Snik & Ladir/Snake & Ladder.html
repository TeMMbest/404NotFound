<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Snik & Ladir</title>
    <style>
      :root {
        --bg: #0f1420;
        --panel: #121a2a;
        --panel-2: #0e1626;
        --text: #e8eefc;
        --muted: #9fb0d0;
        --accent: #5b8cff;
        --accent-2: #7be3b1;
        --danger: #ff6978;
        --gold: #f7c948;
        --cell-size: min(6.8vmin, 54px);
        --cell-gap: 3px;
        --radius: 14px;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Arial,
          "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--text);
        background: radial-gradient(
            1200px 600px at 20% -10%,
            #1a2440,
            transparent 60%
          ),
          radial-gradient(1000px 700px at 120% 0%, #0d2442, transparent 50%),
          linear-gradient(180deg, #0a1120, #0b1324 50%, #0a1222);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }
      .container {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 22px;
        width: min(1100px, 96vw);
        align-items: start;
      }
      .panel {
        background: linear-gradient(180deg, var(--panel), var(--panel-2));
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      header.panel {
        grid-column: 1 / -1;
        padding: 16px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 700;
        letter-spacing: 0.3px;
      }
      .brand .logo {
        width: 34px;
        height: 34px;
        border-radius: 8px;
        background: conic-gradient(from 210deg, var(--accent), var(--accent-2));
        box-shadow: 0 6px 16px rgba(91, 140, 255, 0.4);
      }
      .actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      button {
        appearance: none;
        border: none;
        color: var(--text);
        background: linear-gradient(180deg, #243354, #1a2848);
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 10px 14px;
        border-radius: 12px;
        font-weight: 600;
        letter-spacing: 0.2px;
        cursor: pointer;
        transition: transform 0.08s ease, box-shadow 0.2s ease,
          background 0.2s ease;
      }
      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
      }
      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      .btn-primary {
        background: linear-gradient(180deg, #4161c9, #2f4fb6);
        border-color: rgba(91, 140, 255, 0.4);
      }
      .btn-danger {
        background: linear-gradient(180deg, #d1596a, #be4155);
        border-color: rgba(255, 105, 120, 0.5);
      }

      .board-wrap.panel {
        padding: 14px;
      }
      #board {
        display: grid;
        grid-template-columns: repeat(10, var(--cell-size));
        grid-auto-rows: var(--cell-size);
        gap: var(--cell-gap);
        width: calc(var(--cell-size) * 10 + var(--cell-gap) * 9);
        box-sizing: content-box;
        margin: 0 auto;
        background: linear-gradient(180deg, #0f1a30, #0d1628);
        border-radius: 12px;
        padding: 8px;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      .cell {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(180deg, #1a2746, #18243f);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 8px;
        color: var(--muted);
        font-size: 12px;
        user-select: none;
        overflow: hidden;
      }
      .cell::after {
        content: attr(data-num);
        position: absolute;
        top: 6px;
        left: 8px;
        font-size: 10px;
        opacity: 0.6;
      }
      .cell.snake {
        background: linear-gradient(
          180deg,
          rgba(123, 227, 177, 0.18),
          rgba(123, 227, 177, 0)
        );
      }
      .cell.ladder {
        background: linear-gradient(
          180deg,
          rgba(255, 105, 120, 0.15),
          rgba(255, 105, 120, 0)
        );
      }

      /* Icon overlays for snakes and ladders */
      .cell.snake::before,
      .cell.ladder::before {
        content: "";
        position: absolute;
        inset: 6px;
        opacity: 0.9;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: 84% 84%;
        filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.25));
        z-index: 0;
      }
      .cell.snake::before {
        /* Curved snake SVG now green */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23aef2d0'/%3E%3Cstop offset='1' stop-color='%237be3b1'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M20 160c30-40 60-20 80-40s10-40-10-40-30 20-10 30 50 0 60-20-10-40-30-42-48 10-58 30' fill='none' stroke='url(%23g)' stroke-width='18' stroke-linecap='round' stroke-linejoin='round'/%3E%3Ccircle cx='156' cy='56' r='7' fill='%230b1222'/%3E%3C/svg%3E");
      }
      .cell.ladder::before {
        /* Ladder SVG now red/pink */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='l' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23ffb0b7'/%3E%3Cstop offset='1' stop-color='%23ff6978'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg transform='rotate(-18 100 100) translate(0 -6)' stroke='url(%23l)' stroke-width='12' stroke-linecap='round'%3E%3Cpath d='M70 30v140M130 30v140' fill='none'/%3E%3Cpath d='M70 50h60M70 80h60M70 110h60M70 140h60'/%3E%3C/g%3E%3C/svg%3E");
      }

      .players-layer {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        pointer-events: none;
        z-index: 1;
      }
      .token {
        width: calc(var(--cell-size) * 0.52);
        height: calc(var(--cell-size) * 0.52);
        border-radius: 50%;
        display: grid;
        place-items: center;
        color: #0b1222;
        font-weight: 800;
        letter-spacing: -0.3px;
        transform: translateZ(0);
      }
      .p1 {
        background: radial-gradient(
          circle at 30% 30%,
          #ffb0b7,
          #ff6978 60%,
          #a82a39
        );
        box-shadow: 0 6px 16px rgba(255, 105, 120, 0.5);
      }
      .p2 {
        background: radial-gradient(
          circle at 30% 30%,
          #a6c3ff,
          #5b8cff 60%,
          #2b4a9a
        );
        box-shadow: 0 6px 16px rgba(91, 140, 255, 0.5);
      }

      .sidebar.panel {
        padding: 16px;
        width: min(320px, 84vw);
        display: grid;
        gap: 14px;
      }
      .row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .players {
        display: grid;
        gap: 10px;
      }
      .player-badge {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border-radius: 12px;
        background: linear-gradient(180deg, #141e34, #121b2f);
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      .player-badge .dot {
        width: 16px;
        height: 16px;
        border-radius: 50%;
      }
      .player-badge .name {
        font-weight: 700;
        letter-spacing: 0.3px;
      }
      .player-badge.active {
        border-color: rgba(247, 201, 72, 0.6);
        box-shadow: 0 0 0 2px rgba(247, 201, 72, 0.2) inset;
      }
      .status {
        min-height: 48px;
        padding: 12px 12px;
        background: linear-gradient(180deg, #131c32, #10182a);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        color: var(--muted);
        line-height: 1.5;
      }
      .dice {
        width: 70px;
        height: 70px;
        border-radius: 14px;
        background: radial-gradient(circle at 35% 35%, #ffffff, #f1f4fa);
        display: grid;
        place-items: center;
        box-shadow: 0 16px 30px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(0, 0, 0, 0.08);
        position: relative;
      }
      .pip {
        width: 12px;
        height: 12px;
        background: #0d1426;
        border-radius: 50%;
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
      }
      .dice-grid {
        width: 46px;
        height: 46px;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        gap: 6px;
      }
      .controls {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .legend {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      .pill {
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 12px;
        color: #0b1222;
        font-weight: 700;
        letter-spacing: 0.3px;
      }
      .pill.snake {
        background: linear-gradient(180deg, #aef2d0, #7be3b1);
      }
      .pill.ladder {
        background: linear-gradient(180deg, #ffb0b7, #ff6978);
      }
      .note {
        color: var(--muted);
        font-size: 12px;
        opacity: 0.85;
      }

      @media (max-width: 900px) {
        .container {
          grid-template-columns: 1fr;
        }
        .sidebar.panel {
          order: 2;
        }
      }
    </style>
  </head>
  <body
    style="
      background-image: url('Street Fighter Alpha 2.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center;
    "
  >
    <div class="container">
      <header class="panel">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>Snik & Ladir</div>
        </div>
        <div class="actions">
          <button id="restartBtn" class="btn-danger">Restart</button>
        </div>
      </header>

      <section class="board-wrap panel">
        <div id="board"></div>
      </section>

      <aside class="sidebar panel">
        <div class="players">
          <div id="p1Badge" class="player-badge">
            <div class="dot" style="background: #ff6978"></div>
            <div class="name">Player 1</div>
            <div id="p1Pos" style="margin-left: auto; color: var(--muted)">
              1
            </div>
          </div>
          <div id="p2Badge" class="player-badge">
            <div class="dot" style="background: #5b8cff"></div>
            <div class="name">Player 2</div>
            <div id="p2Pos" style="margin-left: auto; color: var(--muted)">
              1
            </div>
          </div>
        </div>

        <div class="row">
          <div class="dice" id="dice" aria-label="Dice" role="img">
            <div class="dice-grid" id="diceGrid"></div>
          </div>
          <div class="controls">
            <button id="rollBtn" class="btn-primary">Roll</button>
          </div>
        </div>

        <div class="status" id="status">
          Welcome! Player 1 starts. Roll the dice.
        </div>
        <div class="legend">
          <div class="pill snake">Snake: slide down</div>
          <div class="pill ladder">Ladder: climb up</div>
        </div>
        <div class="note">Exact 100 required to win.</div>
      </aside>
    </div>

    <script>
      // Board setup
      const snakes = {
        16: 6,
        48: 26,
        49: 11,
        56: 53,
        62: 19,
        64: 60,
        87: 24,
        93: 73,
        95: 75,
        98: 78,
      };
      const ladders = {
        1: 38,
        4: 14,
        9: 31,
        21: 42,
        28: 84,
        36: 44,
        51: 67,
        71: 91,
        80: 100,
      };

      const board = document.getElementById("board");
      const statusEl = document.getElementById("status");
      const rollBtn = document.getElementById("rollBtn");
      const restartBtn = document.getElementById("restartBtn");
      const p1Badge = document.getElementById("p1Badge");
      const p2Badge = document.getElementById("p2Badge");
      const p1PosEl = document.getElementById("p1Pos");
      const p2PosEl = document.getElementById("p2Pos");

      // Dice setup
      const dice = document.getElementById("dice");
      const diceGrid = document.getElementById("diceGrid");
      const pipPositionsByValue = {
        1: [5],
        2: [1, 9],
        3: [1, 5, 9],
        4: [1, 3, 7, 9],
        5: [1, 3, 5, 7, 9],
        6: [1, 3, 4, 6, 7, 9],
      };
      function renderDice(value) {
        diceGrid.innerHTML = "";
        for (let i = 1; i <= 9; i++) {
          const slot = document.createElement("div");
          if (pipPositionsByValue[value].includes(i)) {
            const pip = document.createElement("div");
            pip.className = "pip";
            slot.appendChild(pip);
          }
          diceGrid.appendChild(slot);
        }
      }
      renderDice(1);

      // Game state
      let playerPositions = [1, 1];
      let currentPlayer = 0; // 0: P1, 1: P2
      let isAnimating = false;

      // Draw board cells
      function drawBoard() {
        board.innerHTML = "";
        for (let i = 100; i >= 1; i--) {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.id = "cell-" + i;
          cell.setAttribute("data-num", i);
          if (snakes[i]) cell.classList.add("snake");
          if (ladders[i]) cell.classList.add("ladder");
          const layer = document.createElement("div");
          layer.className = "players-layer";
          cell.appendChild(layer);
          board.appendChild(cell);
        }
      }
      drawBoard();

      function placeTokens() {
        document
          .querySelectorAll(".players-layer")
          .forEach((l) => (l.innerHTML = ""));
        playerPositions.forEach((pos, idx) => {
          const cell = document.getElementById("cell-" + pos);
          if (cell) {
            const layer = cell.querySelector(".players-layer");
            const token = document.createElement("div");
            token.className = "token " + (idx === 0 ? "p1" : "p2");
            token.textContent = idx === 0 ? "1" : "2";
            layer.appendChild(token);
          }
        });
        p1PosEl.textContent = playerPositions[0];
        p2PosEl.textContent = playerPositions[1];
      }
      placeTokens();

      function setActiveBadge() {
        p1Badge.classList.toggle("active", currentPlayer === 0);
        p2Badge.classList.toggle("active", currentPlayer === 1);
      }
      setActiveBadge();

      function sleep(ms) {
        return new Promise((res) => setTimeout(res, ms));
      }

      async function animateMove(from, to, idx) {
        const step = from < to ? 1 : -1;
        let cur = from;
        while (cur !== to) {
          cur += step;
          playerPositions[idx] = cur;
          placeTokens();
          await sleep(160);
        }
      }

      async function handleSnakeOrLadder(idx) {
        const pos = playerPositions[idx];
        if (snakes[pos]) {
          statusEl.textContent += ` Snake! Down to ${snakes[pos]}.`;
          try {
            sfxSnake.currentTime = 0;
            sfxSnake.play();
          } catch (e) {}
          await sleep(250);
          await animateMove(pos, snakes[pos], idx);
        } else if (ladders[pos]) {
          statusEl.textContent += ` Ladder! Up to ${ladders[pos]}.`;
          try {
            sfxLadder.currentTime = 0;
            sfxLadder.play();
          } catch (e) {}
          await sleep(250);
          await animateMove(pos, ladders[pos], idx);
        }
      }

      async function rollDiceAnimated() {
        const spins = 10 + Math.floor(Math.random() * 6);
        let value = 1;
        for (let i = 0; i < spins; i++) {
          value = Math.floor(Math.random() * 6) + 1;
          renderDice(value);
          await sleep(70 + i * 8);
        }
        return value;
      }

      function isGameOver() {
        return playerPositions.some((p) => p === 100);
      }

      async function takeTurn() {
        if (isAnimating || isGameOver()) return;
        isAnimating = true;
        rollBtn.disabled = true;
        const playerName = currentPlayer === 0 ? "Player 1" : "Player 2";
        statusEl.textContent = `${playerName} rolling...`;
        const roll = await rollDiceAnimated();
        try {
          sfxRoll.currentTime = 0;
          sfxRoll.play();
        } catch (e) {}
        statusEl.textContent = `${playerName} rolled a ${roll}.`;

        const start = playerPositions[currentPlayer];
        let target = start + roll;
        // Require exact 100
        if (target > 100) {
          statusEl.textContent += ` Overshot 100. Stay at ${start}.`;
          await sleep(400);
        } else {
          await animateMove(start, target, currentPlayer);
          await handleSnakeOrLadder(currentPlayer);
        }

        placeTokens();

        if (playerPositions[currentPlayer] === 100) {
          statusEl.textContent = `ðŸŽ‰ ${playerName} wins! Click Restart to play again.`;
          try {
            sfxWin.currentTime = 0;
            sfxWin.play();
          } catch (e) {}
          rollBtn.disabled = true;
          isAnimating = false;
          return;
        }

        currentPlayer = currentPlayer === 0 ? 1 : 0;
        setActiveBadge();
        statusEl.textContent += ` ${
          currentPlayer === 0 ? "Player 1" : "Player 2"
        }'s turn.`;
        rollBtn.disabled = false;
        isAnimating = false;
      }

      rollBtn.addEventListener("click", takeTurn);

      restartBtn.addEventListener("click", () => {
        if (isAnimating) return;
        playerPositions = [1, 1];
        currentPlayer = 0;
        placeTokens();
        setActiveBadge();
        statusEl.textContent = "Welcome! Player 1 starts. Roll the dice.";
        rollBtn.disabled = false;
        renderDice(1);
      });

      // Lightweight SFX using data URIs (no external files needed)
      const sfxRoll = new Audio(
        "data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA...AAA"
      );
      const sfxSnake = new Audio(
        "data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA...AAA"
      );
      const sfxLadder = new Audio(
        "data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA...AAA"
      );
      const sfxWin = new Audio(
        "data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA...AAA"
      );
    </script>
  </body>
</html>
